<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Buffet Sobral</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: #f5f5f5; }
        
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #e91e63, #9c27b0);
        }
        
        .login-form {
            background: white;
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            width: 100%;
            max-width: 400px;
        }
        
        .login-form h1 {
            text-align: center;
            color: #9c27b0;
            margin-bottom: 30px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-weight: 600;
        }
        
        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: #9c27b0;
        }
        
        .login-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #9c27b0, #e91e63);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .login-btn:hover {
            transform: translateY(-2px);
        }
        
        .admin-container {
            display: none;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .admin-header {
            background: linear-gradient(135deg, #e91e63, #9c27b0);
            color: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logout-btn {
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
        }
        
        .admin-tabs {
            display: flex;
            background: white;
            border-radius: 12px;
            margin-bottom: 20px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .admin-tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            border: none;
            background: none;
            cursor: pointer;
            border-bottom: 3px solid transparent;
        }
        
        .admin-tab.active {
            color: #9c27b0;
            border-bottom-color: #9c27b0;
            background: #f8f4ff;
        }
        
        .admin-section {
            display: none;
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .admin-section.active {
            display: block;
        }
        
        .service-form {
            display: grid;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .service-form input, .service-form textarea {
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
        }
        
        .service-form button {
            padding: 15px;
            background: #9c27b0;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            cursor: pointer;
        }
        
        .services-list {
            display: grid;
            gap: 15px;
        }
        
        .service-item {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #9c27b0;
        }
        
        .service-item h3 {
            color: #9c27b0;
            margin-bottom: 10px;
        }
        
        .service-actions {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }
        
        .btn-edit {
            background: #2196f3;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
        }
        
        .btn-delete {
            background: #f44336;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #9c27b0, #e91e63);
            color: white;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .error-message {
            background: #ffebee;
            color: #c62828;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #f44336;
        }
        
        .success-message {
            background: #e8f5e8;
            color: #2e7d32;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #4caf50;
        }
    </style>
</head>
<body>
    <!-- Tela de Login -->
    <div id="loginScreen" class="login-container">
        <div class="login-form">
            <h1>üéÇ Admin Buffet Sobral</h1>
            <form onsubmit="login(event)">
                <div class="form-group">
                    <label for="username">Usu√°rio:</label>
                    <input type="text" id="username" required>
                </div>
                <div class="form-group">
                    <label for="password">Senha:</label>
                    <input type="password" id="password" required>
                </div>
                <button type="submit" class="login-btn">Entrar</button>
            </form>
            <div id="loginError" class="error-message" style="display: none;">
                Usu√°rio ou senha incorretos!
            </div>
        </div>
    </div>

    <!-- Painel Administrativo -->
    <div id="adminPanel" class="admin-container">
        <div class="admin-header">
            <div>
                <h1>üéÇ Painel Administrativo</h1>
                <p>Gerencie seu buffet de forma simples e eficiente</p>
            </div>
            <button class="logout-btn" onclick="logout()">Sair</button>
        </div>

        <div class="admin-tabs">
            <button class="admin-tab active" onclick="showAdminTab('dashboard')">üìä Dashboard</button>
            <button class="admin-tab" onclick="showAdminTab('services')">üçΩÔ∏è Servi√ßos</button>
            <button class="admin-tab" onclick="showAdminTab('bookings')">üìÖ Agendamentos</button>
            <button class="admin-tab" onclick="showAdminTab('gallery')">üì∏ Galeria</button>
            <button class="admin-tab" onclick="showAdminTab('videos')">üé¨ V√≠deos</button>
        </div>

        <!-- Dashboard -->
        <div id="dashboard" class="admin-section active">
            <h2>üìä Dashboard</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalServices">8</div>
                    <div>Servi√ßos Ativos</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalBookings">23</div>
                    <div>Agendamentos</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalQuotes">156</div>
                    <div>Or√ßamentos</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalRevenue">R$ 45.2k</div>
                    <div>Faturamento</div>
                </div>
            </div>
            
            <div style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
                <h3>üìà Resumo do M√™s</h3>
                <p>‚Ä¢ Eventos realizados: 12</p>
                <p>‚Ä¢ Novos clientes: 8</p>
                <p>‚Ä¢ Avalia√ß√£o m√©dia: 4.9/5</p>
                <p>‚Ä¢ Servi√ßo mais solicitado: Buffet Completo</p>
            </div>
        </div>

        <!-- Gerenciar Servi√ßos -->
        <div id="services" class="admin-section">
            <h2>üçΩÔ∏è Gerenciar Servi√ßos</h2>
            
            <div class="service-form">
                <h3>Adicionar/Editar Servi√ßo</h3>
                <input type="hidden" id="serviceId">
                <input type="text" id="serviceName" placeholder="Nome do servi√ßo" required>
                <textarea id="serviceDescription" placeholder="Descri√ß√£o do servi√ßo" rows="3" required></textarea>
                <input type="number" id="servicePrice" placeholder="Pre√ßo por pessoa" step="0.01" required>
                <button type="button" onclick="saveService()">Salvar Servi√ßo</button>
            </div>

            <div id="servicesList" class="services-list">
                <!-- Servi√ßos ser√£o carregados aqui -->
            </div>
        </div>

        <!-- Agendamentos -->
        <div id="bookings" class="admin-section">
            <h2>üìÖ Agendamentos</h2>
            <div style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
                <h3>Pr√≥ximos Eventos</h3>
                <div style="margin-top: 15px;">
                    <div style="background: white; padding: 15px; border-radius: 6px; margin-bottom: 10px;">
                        <strong>Anivers√°rio - Ana Silva</strong><br>
                        üìÖ 25/09/2025 - 19h<br>
                        üë• 80 pessoas<br>
                        üí∞ R$ 3.600,00
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 6px; margin-bottom: 10px;">
                        <strong>Casamento - Jo√£o & Maria</strong><br>
                        üìÖ 28/09/2025 - 18h<br>
                        üë• 150 pessoas<br>
                        üí∞ R$ 8.250,00
                    </div>
                    <div style="background: white; padding: 15px; border-radius: 6px;">
                        <strong>Formatura - Turma 2025</strong><br>
                        üìÖ 30/09/2025 - 20h<br>
                        üë• 200 pessoas<br>
                        üí∞ R$ 11.000,00
                    </div>
                </div>
            </div>
        </div>

        <!-- Galeria -->
        <div id="gallery" class="admin-section">
            <h2>üì∏ Gerenciar Galeria</h2>
            <div style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
                <h3>Upload de Imagens</h3>
                <div style="margin: 15px 0;">
                    <input type="file" id="adminPhotoUpload" accept="image/*" multiple style="margin-bottom: 10px;">
                    <div style="display: flex; gap: 10px;">
                        <button onclick="handleAdminPhotoUpload()" style="background: #9c27b0; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer;">
                            üì§ Fazer Upload
                        </button>
                        <button onclick="loadAdminGallery()" style="background: #2196f3; color: white; border: none; padding: 10px 20px; border-radius: 6px; cursor: pointer;">
                            üîÑ Atualizar
                        </button>
                    </div>
                </div>
                
                <div style="margin-top: 30px;">
                    <h3>Imagens Atuais</h3>
                    <div id="adminGalleryGrid" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(150px, 1fr)); gap: 15px; margin-top: 15px;">
                        <!-- Fotos ser√£o carregadas aqui -->
                    </div>
                </div>
            </div>
        </div>

        <!-- V√≠deos -->
        <div id="videos" class="admin-section">
            <h2>üé¨ Gerenciar V√≠deos</h2>
            
            <div class="service-form">
                <h3>Adicionar/Editar V√≠deo do YouTube</h3>
                <input type="hidden" id="videoId">
                <input type="text" id="videoTitle" placeholder="T√≠tulo do v√≠deo" required>
                <textarea id="videoDescription" placeholder="Descri√ß√£o do v√≠deo" rows="2" required></textarea>
                <input type="url" id="videoUrl" placeholder="Link do YouTube (ex: https://www.youtube.com/watch?v=...)" required>
                <button type="button" onclick="saveVideo()">Salvar V√≠deo</button>
            </div>

            <div id="videosList" class="services-list">
                <!-- V√≠deos ser√£o carregados aqui -->
            </div>
        </div>
    </div>

    <script>
        // Dados dos servi√ßos (usando localStorage para persist√™ncia)
        let services = [];

        // Fun√ß√£o para carregar servi√ßos do localStorage
        function loadServicesFromStorage() {
            const savedServices = localStorage.getItem('buffetServices');
            if (savedServices) {
                services = JSON.parse(savedServices);
            } else {
                // Servi√ßos padr√£o se n√£o houver dados salvos
                services = [
                    { id: 1, name: 'Buffet Completo', description: 'Salgados, doces, bebidas e servi√ßo completo', price: 45, serviceId: 'buffet-completo' },
                    { id: 2, name: 'Bolo Personalizado', description: 'Bolos tem√°ticos e personalizados para sua festa', price: 120, serviceId: 'bolo-personalizado' },
                    { id: 3, name: 'Decora√ß√£o Tem√°tica', description: 'Decora√ß√£o completa para todos os tipos de festa', price: 200, serviceId: 'decoracao-tematica' },
                    { id: 4, name: 'Coffee Break Corporativo', description: 'Caf√©, salgados, doces e sucos para eventos empresariais', price: 25, serviceId: 'coffee-break' },
                    { id: 5, name: 'Jantar Executivo', description: 'Menu sofisticado para jantares corporativos e eventos formais', price: 85, serviceId: 'jantar-executivo' },
                    { id: 6, name: 'Coquetel de Confraterniza√ß√£o', description: 'Finger foods, canap√©s e bebidas para eventos sociais', price: 35, serviceId: 'coquetel-confraternizacao' },
                    { id: 7, name: 'Lanche para Eventos', description: 'Sandu√≠ches, salgados e refrigerantes para eventos casuais', price: 18, serviceId: 'lanche-eventos' },
                    { id: 8, name: 'Churrasco Completo', description: 'Carnes nobres, acompanhamentos e saladas para confraterniza√ß√µes', price: 55, serviceId: 'churrasco-completo' }
                ];
                saveServicesToStorage();
            }
        }

        // Fun√ß√£o para salvar servi√ßos no localStorage
        function saveServicesToStorage() {
            localStorage.setItem('buffetServices', JSON.stringify(services));
        }

        // Fun√ß√£o de login
        function login(event) {
            event.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            
            // Credenciais simples para demonstra√ß√£o
            if (username === 'admin' && password === 'buffet123') {
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('adminPanel').style.display = 'block';
                loadServices();
                loadAdminGallery(); // Carregar galeria
                loadVideos(); // Carregar v√≠deos
            } else {
                document.getElementById('loginError').style.display = 'block';
            }
        }

        // Fun√ß√£o de logout
        function logout() {
            document.getElementById('loginScreen').style.display = 'flex';
            document.getElementById('adminPanel').style.display = 'none';
            document.getElementById('username').value = '';
            document.getElementById('password').value = '';
            document.getElementById('loginError').style.display = 'none';
        }

        // Navega√ß√£o entre abas
        function showAdminTab(tabName) {
            // Esconder todas as se√ß√µes
            document.querySelectorAll('.admin-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Remover classe active de todas as abas
            document.querySelectorAll('.admin-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Mostrar a se√ß√£o selecionada
            document.getElementById(tabName).classList.add('active');
            
            // Adicionar classe active √† aba clicada
            event.target.classList.add('active');
        }

        // Carregar servi√ßos
        function loadServices() {
            const servicesList = document.getElementById('servicesList');
            servicesList.innerHTML = '';
            
            services.forEach(service => {
                const serviceDiv = document.createElement('div');
                serviceDiv.className = 'service-item';
                serviceDiv.innerHTML = `
                    <h3>${service.name}</h3>
                    <p>${service.description}</p>
                    <p><strong>Pre√ßo:</strong> R$ ${service.price}/pessoa</p>
                    <div class="service-actions">
                        <button class="btn-edit" onclick="editService(${service.id})">Editar</button>
                        <button class="btn-delete" onclick="deleteService(${service.id})">Excluir</button>
                    </div>
                `;
                servicesList.appendChild(serviceDiv);
            });
        }

        // Salvar servi√ßo
        function saveService() {
            const id = document.getElementById('serviceId').value;
            const name = document.getElementById('serviceName').value;
            const description = document.getElementById('serviceDescription').value;
            const price = parseFloat(document.getElementById('servicePrice').value);
            
            if (!name || !description || !price) {
                alert('Por favor, preencha todos os campos!');
                return;
            }
            
            if (id) {
                // Editar servi√ßo existente
                const serviceIndex = services.findIndex(s => s.id == id);
                if (serviceIndex !== -1) {
                    services[serviceIndex] = { 
                        id: parseInt(id), 
                        name, 
                        description, 
                        price,
                        serviceId: services[serviceIndex].serviceId || generateServiceId(name)
                    };
                }
            } else {
                // Adicionar novo servi√ßo
                const newId = Math.max(...services.map(s => s.id)) + 1;
                const serviceId = generateServiceId(name);
                services.push({ id: newId, name, description, price, serviceId });
            }
            
            // Salvar no localStorage
            saveServicesToStorage();
            
            // Limpar formul√°rio
            document.getElementById('serviceId').value = '';
            document.getElementById('serviceName').value = '';
            document.getElementById('serviceDescription').value = '';
            document.getElementById('servicePrice').value = '';
            
            // Recarregar lista
            loadServices();
            
            // Mostrar mensagem de sucesso
            showMessage('Servi√ßo salvo com sucesso!', 'success');
        }

        // Gerar ID do servi√ßo baseado no nome
        function generateServiceId(name) {
            return name.toLowerCase()
                .replace(/[^a-z0-9\s]/g, '')
                .replace(/\s+/g, '-')
                .substring(0, 20);
        }

        // Editar servi√ßo
        function editService(id) {
            const service = services.find(s => s.id === id);
            if (service) {
                document.getElementById('serviceId').value = service.id;
                document.getElementById('serviceName').value = service.name;
                document.getElementById('serviceDescription').value = service.description;
                document.getElementById('servicePrice').value = service.price;
            }
        }

        // Excluir servi√ßo
        function deleteService(id) {
            if (confirm('Tem certeza que deseja excluir este servi√ßo?')) {
                services = services.filter(s => s.id !== id);
                saveServicesToStorage();
                loadServices();
                showMessage('Servi√ßo exclu√≠do com sucesso!', 'success');
            }
        }

        // Mostrar mensagem
        function showMessage(message, type) {
            const messageDiv = document.createElement('div');
            messageDiv.className = type === 'success' ? 'success-message' : 'error-message';
            messageDiv.textContent = message;
            
            const servicesSection = document.getElementById('services');
            servicesSection.insertBefore(messageDiv, servicesSection.firstChild);
            
            setTimeout(() => {
                messageDiv.remove();
            }, 3000);
        }

        // Fun√ß√µes para gerenciar galeria no admin
        function handleAdminPhotoUpload() {
            const fileInput = document.getElementById('adminPhotoUpload');
            const files = fileInput.files;
            
            if (files.length === 0) {
                alert('Por favor, selecione pelo menos uma imagem!');
                return;
            }
            
            const existingPhotos = getGalleryPhotos();
            let uploadCount = 0;
            
            Array.from(files).forEach(file => {
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const photoData = {
                            id: Date.now() + Math.random(),
                            name: file.name,
                            data: e.target.result,
                            uploadDate: new Date().toISOString()
                        };
                        
                        existingPhotos.push(photoData);
                        uploadCount++;
                        
                        if (uploadCount === files.length) {
                            saveGalleryPhotos(existingPhotos);
                            loadAdminGallery();
                            fileInput.value = ''; // Limpar input
                            showMessage(`${uploadCount} foto(s) adicionada(s) com sucesso!`, 'success');
                        }
                    };
                    reader.readAsDataURL(file);
                }
            });
        }
        
        function loadAdminGallery() {
            const photos = getGalleryPhotos();
            const galleryGrid = document.getElementById('adminGalleryGrid');
            
            if (photos.length === 0) {
                galleryGrid.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: #666;">
                        <div style="font-size: 3rem; margin-bottom: 15px;">üì∏</div>
                        <p>Nenhuma foto carregada ainda.</p>
                        <p>Use o bot√£o "Fazer Upload" para adicionar fotos do espa√ßo.</p>
                    </div>
                `;
            } else {
                galleryGrid.innerHTML = photos.map(photo => `
                    <div style="position: relative; background-image: url('${photo.data}'); background-size: cover; background-position: center; height: 120px; border-radius: 8px; cursor: pointer;" onclick="viewAdminPhoto('${photo.id}')">
                        <div style="position: absolute; top: 5px; right: 5px;">
                            <button onclick="event.stopPropagation(); deleteAdminPhoto('${photo.id}')" style="background: #f44336; color: white; border: none; border-radius: 50%; width: 25px; height: 25px; font-size: 0.8rem; cursor: pointer;">√ó</button>
                        </div>
                        <div style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(0,0,0,0.7); color: white; padding: 5px; border-radius: 0 0 8px 8px; font-size: 0.8rem; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;">
                            ${photo.name}
                        </div>
                    </div>
                `).join('');
            }
        }
        
        function getGalleryPhotos() {
            const photos = localStorage.getItem('buffetGallery');
            return photos ? JSON.parse(photos) : [];
        }
        
        function saveGalleryPhotos(photos) {
            localStorage.setItem('buffetGallery', JSON.stringify(photos));
        }
        
        function deleteAdminPhoto(photoId) {
            if (confirm('Tem certeza que deseja excluir esta foto?')) {
                const photos = getGalleryPhotos();
                const updatedPhotos = photos.filter(photo => photo.id !== photoId);
                saveGalleryPhotos(updatedPhotos);
                loadAdminGallery();
                showMessage('Foto exclu√≠da com sucesso!', 'success');
            }
        }
        
        function viewAdminPhoto(photoId) {
            const photos = getGalleryPhotos();
            const photo = photos.find(p => p.id === photoId);
            
            if (photo) {
                const viewer = document.createElement('div');
                viewer.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    right: 0;
                    bottom: 0;
                    background: rgba(0,0,0,0.9);
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    z-index: 10001;
                `;
                
                viewer.innerHTML = `
                    <div style="max-width: 90%; max-height: 90%; text-align: center;">
                        <img src="${photo.data}" style="max-width: 100%; max-height: 80vh; border-radius: 8px;">
                        <div style="color: white; margin-top: 15px; font-size: 1.2rem;">${photo.name}</div>
                        <div style="color: #ccc; margin-top: 5px; font-size: 0.9rem;">Enviado em: ${new Date(photo.uploadDate).toLocaleDateString('pt-BR')}</div>
                        <button onclick="this.parentElement.parentElement.remove()" style="position: absolute; top: 20px; right: 20px; background: rgba(255,255,255,0.2); color: white; border: none; width: 50px; height: 50px; border-radius: 50%; font-size: 2rem; cursor: pointer;">√ó</button>
                    </div>
                `;
                
                viewer.onclick = function(e) {
                    if (e.target === viewer) {
                        viewer.remove();
                    }
                };
                
                document.body.appendChild(viewer);
            }
        }

        // Fun√ß√µes para gerenciar v√≠deos
        function saveVideo() {
            const id = document.getElementById('videoId').value;
            const title = document.getElementById('videoTitle').value;
            const description = document.getElementById('videoDescription').value;
            const url = document.getElementById('videoUrl').value;
            
            if (!title || !description || !url) {
                alert('Por favor, preencha todos os campos!');
                return;
            }
            
            // Validar se √© um link do YouTube
            if (!isValidYouTubeUrl(url)) {
                alert('Por favor, insira um link v√°lido do YouTube!');
                return;
            }
            
            const videos = getVideos();
            const videoData = {
                id: id || Date.now().toString(),
                title,
                description,
                url,
                youtubeId: extractYouTubeId(url),
                createdAt: new Date().toISOString()
            };
            
            if (id) {
                // Editar v√≠deo existente
                const videoIndex = videos.findIndex(v => v.id === id);
                if (videoIndex !== -1) {
                    videos[videoIndex] = videoData;
                }
            } else {
                // Adicionar novo v√≠deo
                videos.push(videoData);
            }
            
            saveVideos(videos);
            loadVideos();
            clearVideoForm();
            showMessage('V√≠deo salvo com sucesso!', 'success');
        }
        
        function loadVideos() {
            const videos = getVideos();
            const videosList = document.getElementById('videosList');
            
            if (videos.length === 0) {
                videosList.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #666;">
                        <div style="font-size: 3rem; margin-bottom: 15px;">üé¨</div>
                        <p>Nenhum v√≠deo adicionado ainda.</p>
                        <p>Use o formul√°rio acima para adicionar v√≠deos do YouTube.</p>
                    </div>
                `;
                return;
            }
            
            videosList.innerHTML = videos.map(video => `
                <div class="service-item">
                    <div style="display: flex; gap: 15px;">
                        <div style="flex-shrink: 0;">
                            <img src="https://img.youtube.com/vi/${video.youtubeId}/mqdefault.jpg" 
                                 style="width: 120px; height: 90px; border-radius: 8px; object-fit: cover;" 
                                 alt="Thumbnail do v√≠deo">
                        </div>
                        <div style="flex: 1;">
                            <h3 style="color: #9c27b0; margin-bottom: 5px;">${video.title}</h3>
                            <p style="color: #666; margin-bottom: 10px;">${video.description}</p>
                            <p style="font-size: 0.9rem; color: #999;">
                                <strong>Link:</strong> <a href="${video.url}" target="_blank" style="color: #2196f3;">${video.url}</a>
                            </p>
                            <p style="font-size: 0.8rem; color: #999; margin-top: 5px;">
                                Adicionado em: ${new Date(video.createdAt).toLocaleDateString('pt-BR')}
                            </p>
                        </div>
                    </div>
                    <div class="service-actions" style="margin-top: 15px;">
                        <button class="btn-edit" onclick="editVideo('${video.id}')">Editar</button>
                        <button class="btn-delete" onclick="deleteVideo('${video.id}')">Excluir</button>
                        <button onclick="previewVideo('${video.youtubeId}')" style="background: #ff4444; color: white; border: none; padding: 8px 15px; border-radius: 6px; cursor: pointer;">‚ñ∂Ô∏è Preview</button>
                    </div>
                </div>
            `).join('');
        }
        
        function getVideos() {
            const videos = localStorage.getItem('buffetVideos');
            return videos ? JSON.parse(videos) : [];
        }
        
        function saveVideos(videos) {
            localStorage.setItem('buffetVideos', JSON.stringify(videos));
        }
        
        function editVideo(videoId) {
            const videos = getVideos();
            const video = videos.find(v => v.id === videoId);
            
            if (video) {
                document.getElementById('videoId').value = video.id;
                document.getElementById('videoTitle').value = video.title;
                document.getElementById('videoDescription').value = video.description;
                document.getElementById('videoUrl').value = video.url;
            }
        }
        
        function deleteVideo(videoId) {
            if (confirm('Tem certeza que deseja excluir este v√≠deo?')) {
                const videos = getVideos();
                const updatedVideos = videos.filter(v => v.id !== videoId);
                saveVideos(updatedVideos);
                loadVideos();
                showMessage('V√≠deo exclu√≠do com sucesso!', 'success');
            }
        }
        
        function clearVideoForm() {
            document.getElementById('videoId').value = '';
            document.getElementById('videoTitle').value = '';
            document.getElementById('videoDescription').value = '';
            document.getElementById('videoUrl').value = '';
        }
        
        function isValidYouTubeUrl(url) {
            const youtubeRegex = /^(https?:\/\/)?(www\.)?(youtube\.com\/(watch\?v=|embed\/)|youtu\.be\/)[\w-]+/;
            return youtubeRegex.test(url);
        }
        
        function extractYouTubeId(url) {
            const regExp = /^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/;
            const match = url.match(regExp);
            return (match && match[7].length === 11) ? match[7] : null;
        }
        
        function previewVideo(youtubeId) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.9);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 10001;
            `;
            
            modal.innerHTML = `
                <div style="max-width: 90%; max-height: 90%; text-align: center;">
                    <iframe width="800" height="450" 
                            src="https://www.youtube.com/embed/${youtubeId}" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen
                            style="border-radius: 8px; max-width: 100%; max-height: 70vh;">
                    </iframe>
                    <button onclick="this.parentElement.parentElement.remove()" 
                            style="position: absolute; top: 20px; right: 20px; background: rgba(255,255,255,0.2); color: white; border: none; width: 50px; height: 50px; border-radius: 50%; font-size: 2rem; cursor: pointer;">√ó</button>
                </div>
            `;
            
            modal.onclick = function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            };
            
            document.body.appendChild(modal);
        }

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            // Carregar servi√ßos do localStorage
            loadServicesFromStorage();
            
            // Verificar se j√° est√° logado (simula√ß√£o)
            const isLoggedIn = sessionStorage.getItem('adminLoggedIn');
            if (isLoggedIn) {
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('adminPanel').style.display = 'block';
                loadServices();
                loadAdminGallery(); // Carregar galeria
                loadVideos(); // Carregar v√≠deos
            }
        });
    </script>
</body>
</html>